<view class="page">
    <block wx:if="{{loading}}">
        <view>Loading</view>
    </block>
    <block wx:else>
        <view wx:if="{{newEvent}}" class="weui-cell">
            <view class="weui-cell__bd">
                <button class="weui-btn mini-btn" type="default" size="mini" bindtap="backToIndex">è¿”å›æˆ‘çš„æ´»åŠ¨</button>
            </view>
            <view class="weui-cell__ft">ç‚¹è¿™é‡Œåˆ†äº«ç»™å¥½å‹ğŸ‘†</view>
        </view>
        <view class="page__hd">
            <view class="page__title with-edit">{{event.name}}</view>
        </view>
        <view class="page__bd">
            <view class="weui-panel">
                <view class="weui-panel__hd">ç»„ç»‡è€…ï¼š{{event.host}}</view>
                <view class="weui-panel__bd">
                    <view class="weui-media-box weui-media-box_text">
                        <view class="weui-media-box__desc">æ—¶é—´</view>
                        <view class="weui-article__p">{{event.dateTime}}</view>
                        <view class="weui-media-box__desc">åœ°ç‚¹</view>
                        <view class="weui-article__p">{{event.address}}</view>
                        <view class="weui-media-box__desc">æ´»åŠ¨ç®€ä»‹</view>
                        <view class="weui-article__p">{{event.description}}</view>                      
                        <view class="weui-media-box__info">
                            <view class="weui-media-box__info__meta clickable" wx:if="{{event.numGuests!=0}}" catchtap="lookupGuests">æŠ¥åå‚åŠ (<text>{{event.numGuests}}</text>)</view>
                            <view class="weui-media-box__info__meta" wx:if="{{event.numGuests==0}}" catchtap="lookupGuests">æŠ¥åå‚åŠ (<text>{{event.numGuests}}</text>)</view>
                            <view class="weui-media-box__info__meta weui-media-box__info__meta_extra">å…³æ³¨(<text>{{event.numPendingGuests}}</text>)</view>
                        </view>
                    </view>
                    <view class="page__bd page__bd_spacing">
                        <block wx:if="{{showParticipate}}">
                        <button class="weui-btn" type="primary" catchtap="participate" disabled="{{loadingParticipate}}" loading="{{loadingParticipate}}">æŠ¥åå‚åŠ </button>
                        </block>
                        <block wx:if="{{showUnparticipate}}">
                        <button class="weui-btn" type="warn" catchtap="unparticipate" disabled="{{loadingUnparticipate}}" loading="{{loadingUnparticipate}}">å–æ¶ˆæŠ¥å</button>
                        </block>
                        <block wx:if="{{showWatch}}">
                        <button class="weui-btn" type="default" disabled="{{loadingWatch}}" loading="{{loadingWatch}}">å…³æ³¨ä¸€ä¸‹</button>
                        </block>
                        <block wx:if="{{showUnwatch}}">
                        <button class="weui-btn" type="default" disabled="{{loadingUnwatch}}" loading="{{loadingUnwatch}}">å–æ¶ˆå…³æ³¨</button>
                        </block>
                    </view>
                </view>
            </view>
        </view>
    </block>
</view>
